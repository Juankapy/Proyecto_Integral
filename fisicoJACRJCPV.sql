/*
DROP TABLE NOTIFICACIONES_RECIBIDAS CASCADE CONSTRAINTS;
DROP TABLE IDENTIFICACION_PATOLOGIAS CASCADE CONSTRAINTS;
DROP TABLE PETICIONES_ADOPCION CASCADE CONSTRAINTS;
DROP TABLE RESERVAS_CITAS CASCADE CONSTRAINTS;
DROP TABLE REDES_SOCIALES CASCADE CONSTRAINTS;
DROP TABLE NOTIFICACION CASCADE CONSTRAINTS;
DROP TABLE PATOLOGIA CASCADE CONSTRAINTS;
DROP TABLE PERROS CASCADE CONSTRAINTS;
DROP TABLE RAZA CASCADE CONSTRAINTS;
DROP TABLE PROTECTORA CASCADE CONSTRAINTS;
DROP TABLE CLIENTE CASCADE CONSTRAINTS;
DROP TABLE USUARIO CASCADE CONSTRAINTS;
DROP TABLE CITAS_CANCELADAS_AUDITORIA;

DROP SEQUENCE SEQ_USUARIO_ID;
DROP SEQUENCE SEQ_CLIENTE_ID;
DROP SEQUENCE SEQ_PROTECTORA_ID;
DROP SEQUENCE SEQ_RAZA_ID;
DROP SEQUENCE SEQ_PERRO_ID;
DROP SEQUENCE SEQ_PATOLOGIA_ID;
DROP SEQUENCE SEQ_RESERVA_CITA_ID;
DROP SEQUENCE SEQ_PETICION_ID;
DROP SEQUENCE SEQ_NOTIFICACION_ID;
DROP SEQUENCE SEQ_RED_SOCIAL_ID;
*/

-- ========= CREACIÓN DE SECUENCIAS =========
CREATE SEQUENCE SEQ_USUARIO_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_CLIENTE_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_PROTECTORA_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_RAZA_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_PERRO_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_PATOLOGIA_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_RESERVA_CITA_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_PETICION_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_NOTIFICACION_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE SEQ_RED_SOCIAL_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;


-- ========= CREACIÓN DE TABLAS =========

CREATE TABLE USUARIO (
    ID_USUARIO NUMBER DEFAULT SEQ_USUARIO_ID.NEXTVAL PRIMARY KEY,
    NOMBRE_USU VARCHAR2(50) NOT NULL UNIQUE,
    CONTRASENA VARCHAR2(100) NOT NULL,
    Rol Char(10) DEFAULT 'CLIENTE' NOT NULL CHECK (Rol IN ('CLIENTE','PROTECTORA')))
    ;

CREATE TABLE CLIENTE (
    ID_CLIENTE NUMBER DEFAULT SEQ_CLIENTE_ID.NEXTVAL PRIMARY KEY,
    NIF VARCHAR2(9) UNIQUE,
    NOMBRE VARCHAR2(50) NOT NULL,
    APELLIDOS VARCHAR2(100) NOT NULL,
    FECHA_NACIMIENTO DATE,
    PROVINCIA VARCHAR2(50) NOT NULL,
    CIUDAD VARCHAR2(100) NOT NULL,
    CALLE VARCHAR2(150) NOT NULL,
    CP VARCHAR2(5) NOT NULL,
    TELEFONO VARCHAR2(15),
    EMAIL VARCHAR2(100) NOT NULL UNIQUE,
    ID_USUARIO NUMBER UNIQUE,
    CONSTRAINT FK_CLIENTE_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO) ON DELETE CASCADE
);

CREATE TABLE PROTECTORA (
    ID_PROTECTORA NUMBER DEFAULT SEQ_PROTECTORA_ID.NEXTVAL PRIMARY KEY,
    CIF VARCHAR2(9) UNIQUE NOT NULL,
    NOMBRE VARCHAR2(100) NOT NULL,
    TELEFONO VARCHAR2(15) NOT NULL,
    EMAIL VARCHAR2(100) NOT NULL,
    PROVINCIA VARCHAR2(50) NOT NULL,
    CIUDAD VARCHAR2(100) NOT NULL,
    CALLE VARCHAR2(150) NOT NULL,
    CP VARCHAR2(5) NOT NULL,
    ID_USUARIO NUMBER UNIQUE,
    CONSTRAINT FK_PROTECTORA_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO) ON DELETE CASCADE
);

CREATE TABLE RAZA (
    ID_RAZA NUMBER DEFAULT SEQ_RAZA_ID.NEXTVAL PRIMARY KEY,
    NOMBRE_RAZA VARCHAR2(50) NOT NULL UNIQUE
);

CREATE TABLE PERROS (
    ID_PERRO NUMBER DEFAULT SEQ_PERRO_ID.NEXTVAL PRIMARY KEY,
    NOMBRE VARCHAR2(50) NOT NULL,
    SEXO VARCHAR2(6) NOT NULL CHECK (SEXO IN ('Macho', 'Hembra')),
    FECHA_NACIMIENTO DATE,
    ADOPTADO CHAR(1) DEFAULT 'N' NOT NULL CHECK (ADOPTADO IN ('S','N')),
    FOTO VARCHAR2(255),
    ID_PROTECTORA NUMBER NOT NULL,
    ID_RAZA NUMBER NOT NULL,
    CONSTRAINT FK_PERRO_PROTECTORA FOREIGN KEY (ID_PROTECTORA) REFERENCES PROTECTORA(ID_PROTECTORA) ON DELETE CASCADE,
    CONSTRAINT FK_PERRO_RAZA FOREIGN KEY (ID_RAZA) REFERENCES RAZA(ID_RAZA)
);

CREATE TABLE PATOLOGIA (
    ID_PATOLOGIA NUMBER DEFAULT SEQ_PATOLOGIA_ID.NEXTVAL PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL UNIQUE,
    DESCRIPCION_PATOLOGIA VARCHAR2(255)
);

CREATE TABLE IDENTIFICACION_PATOLOGIAS (
    ID_PERRO NUMBER,
    ID_PATOLOGIA NUMBER,
    NOTAS_ESPECIFICAS VARCHAR2(255),
    CONSTRAINT PK_IDENT_PATOLOGIA PRIMARY KEY (ID_PERRO, ID_PATOLOGIA),
    CONSTRAINT FK_IDENTP_PERRO FOREIGN KEY (ID_PERRO) REFERENCES PERROS(ID_PERRO) ON DELETE CASCADE,
    CONSTRAINT FK_IDENTP_PATOLOGIA FOREIGN KEY (ID_PATOLOGIA) REFERENCES PATOLOGIA(ID_PATOLOGIA) ON DELETE CASCADE
);

CREATE TABLE RESERVAS_CITAS (
    ID_RESERVA_CITA NUMBER DEFAULT SEQ_RESERVA_CITA_ID.NEXTVAL PRIMARY KEY,
    FECHA DATE NOT NULL,
    HORA VARCHAR2(8) NOT NULL,
    DONACION NUMBER(10,2) CHECK (DONACION >= 3),
    ID_CLIENTE NUMBER NOT NULL,
    ID_PERRO NUMBER,
    ID_PROTECTORA NUMBER NOT NULL,
    ESTADO_CITA VARCHAR2(20) DEFAULT 'Pendiente' NOT NULL 
        CHECK (ESTADO_CITA IN ('Pendiente', 'Confirmada', 'Cancelada', 'Completada')),
    CONSTRAINT FK_RESERVA_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE) ON DELETE CASCADE,
    CONSTRAINT FK_RESERVA_PERRO FOREIGN KEY (ID_PERRO) REFERENCES PERROS(ID_PERRO) ON DELETE SET NULL,
    CONSTRAINT FK_RESERVA_PROTECTORA FOREIGN KEY (ID_PROTECTORA) REFERENCES PROTECTORA(ID_PROTECTORA) ON DELETE CASCADE
);


CREATE TABLE PETICIONES_ADOPCION (
    ID_PETICION NUMBER DEFAULT SEQ_PETICION_ID.NEXTVAL PRIMARY KEY,
    FECHA DATE DEFAULT SYSDATE NOT NULL,
    ESTADO VARCHAR2(20) DEFAULT 'Pendiente' NOT NULL CHECK (ESTADO IN ('Pendiente', 'Aceptada', 'Rechazada')),
    ID_CLIENTE NUMBER NOT NULL,
    ID_PERRO NUMBER NOT NULL,
    MENSAJE_PETICION VARCHAR2(500),
    NOTAS_PROTECTORA VARCHAR2(500),
    CONSTRAINT FK_PETICION_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE) ON DELETE CASCADE,
    CONSTRAINT FK_PETICION_PERRO FOREIGN KEY (ID_PERRO) REFERENCES PERROS(ID_PERRO) ON DELETE CASCADE
);

CREATE TABLE NOTIFICACION (
    ID_NOTIFICACION NUMBER DEFAULT SEQ_NOTIFICACION_ID.NEXTVAL PRIMARY KEY,
    FECHA_GENERACION TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    MENSAJE VARCHAR2(500) NOT NULL,
    TIPO_NOTIFICACION VARCHAR2(50),
    ID_ENTIDAD_RELACIONADA NUMBER,
    ENTIDAD_TIPO VARCHAR2(50)
);

CREATE TABLE NOTIFICACIONES_RECIBIDAS (
    ID_USUARIO NUMBER,
    ID_NOTIFICACION NUMBER,
    LEIDA CHAR(1) DEFAULT 'N' NOT NULL CHECK (LEIDA IN ('S','N')),
    FECHA_LEIDA TIMESTAMP,
    CONSTRAINT PK_NOTIF_RECIBIDA PRIMARY KEY (ID_USUARIO, ID_NOTIFICACION),
    CONSTRAINT FK_NOTIFREC_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO) ON DELETE CASCADE,
    CONSTRAINT FK_NOTIFREC_NOTIF FOREIGN KEY (ID_NOTIFICACION) REFERENCES NOTIFICACION(ID_NOTIFICACION) ON DELETE CASCADE
);

CREATE TABLE REDES_SOCIALES (
    ID_RED_SOCIAL NUMBER DEFAULT SEQ_RED_SOCIAL_ID.NEXTVAL PRIMARY KEY,
    PLATAFORMA VARCHAR2(50) NOT NULL,
    URL VARCHAR2(255) NOT NULL,
    ID_PROTECTORA NUMBER NOT NULL,
    CONSTRAINT UQ_PROTECTORA_PLATAFORMA UNIQUE (ID_PROTECTORA, PLATAFORMA),
    CONSTRAINT FK_REDSOCIAL_PROTECTORA FOREIGN KEY (ID_PROTECTORA) REFERENCES PROTECTORA(ID_PROTECTORA) ON DELETE CASCADE
);

ALTER TABLE CLIENTE ADD RUTA_FOTO_PERFIL VARCHAR2(255);

-- ========= FUNCIÓN: Obtener ID de usuario desde ID de protectora asociada a un perro =========

CREATE OR REPLACE FUNCTION usuario_por_perro(id_perro_in NUMBER)
RETURN NUMBER
IS
    resultado NUMBER;
BEGIN
    SELECT u.id_usuario
    INTO resultado
    FROM perros p
    JOIN protectora pr ON p.id_protectora = pr.id_protectora
    JOIN usuario u ON pr.id_usuario = u.id_usuario
    WHERE p.id_perro = id_perro_in;

    RETURN resultado;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RETURN NULL;
END;
/

-- ========= PROCEDIMIENTO: Crear notificación y asignarla a un usuario =========

CREATE OR REPLACE PROCEDURE crear_notificacion(
    mensaje_in VARCHAR2,
    tipo_in VARCHAR2,
    id_entidad NUMBER,
    tipo_entidad VARCHAR2,
    id_usuario NUMBER
)
IS
    id_notif NUMBER;
BEGIN
    INSERT INTO notificacion (
        mensaje,
        tipo_notificacion,
        id_entidad_relacionada,
        entidad_tipo
    ) VALUES (
        mensaje_in,
        tipo_in,
        id_entidad,
        tipo_entidad
    )
    RETURNING id_notificacion INTO id_notif;

    INSERT INTO notificaciones_recibidas (
        id_usuario,
        id_notificacion
    ) VALUES (
        id_usuario,
        id_notif
    );
END;
/



-- ========= DISPARADOR: Nueva petición de adopción =========

CREATE OR REPLACE TRIGGER nueva_peticion
AFTER INSERT ON peticiones_adopcion
FOR EACH ROW
DECLARE
    usuario_destino NUMBER;
BEGIN
    usuario_destino := usuario_por_perro(:NEW.id_perro);

    IF usuario_destino IS NOT NULL THEN
        crear_notificacion(
            'Se ha creado una nueva petición de adopción.',
            'Petición',
            :NEW.id_peticion,
            'peticiones_adopcion',
            usuario_destino
        );
    END IF;
END;
/

-- ========= DISPARADOR: Nueva reserva de cita =========

CREATE OR REPLACE TRIGGER nueva_reserva
AFTER INSERT ON reservas_citas
FOR EACH ROW
DECLARE
    usuario_destino NUMBER;
BEGIN
    SELECT u.id_usuario
    INTO usuario_destino
    FROM protectora p
    JOIN usuario u ON p.id_usuario = u.id_usuario
    WHERE p.id_protectora = :NEW.id_protectora;

    IF usuario_destino IS NOT NULL THEN
        crear_notificacion(
            'Se ha registrado una nueva reserva de cita.',
            'Reserva',
            :NEW.id_reserva_cita,
            'reservas_citas',
            usuario_destino
        );
    END IF;
END;
/

-- ========= DISPARADOR: Cambio de estado en una petición de adopción =========

CREATE OR REPLACE TRIGGER estado_peticion
AFTER UPDATE OF estado ON peticiones_adopcion
FOR EACH ROW
WHEN (OLD.estado != NEW.estado)
DECLARE
    usuario_destino NUMBER;
    mensaje_estado VARCHAR2(100);
BEGIN
    -- Obtener el id_usuario del cliente asociado
    SELECT c.id_usuario
    INTO usuario_destino
    FROM cliente c
    WHERE c.id_cliente = :NEW.id_cliente;

    -- Componer mensaje según nuevo estado
    mensaje_estado := 'El estado de tu petición de adopción ha cambiado a "' || :NEW.estado || '".';

    IF usuario_destino IS NOT NULL THEN
        crear_notificacion(
            mensaje_estado,
            'Estado Petición',
            :NEW.id_peticion,
            'peticiones_adopcion',
            usuario_destino
        );
    END IF;
END;
/

-- 1. USUARIOS
-- (El ROL ya no se inserta aquí porque lo añadiste con ALTER TABLE después)
INSERT INTO USUARIO (ID_USUARIO, NOMBRE_USU, CONTRASENA, ROL) 
VALUES (SEQ_USUARIO_ID.NEXTVAL, 'cliente_ana', 'securepass1', 'CLIENTE'); -- ID_USUARIO será 1 (asumiendo que la secuencia empieza en 1)

INSERT INTO USUARIO (ID_USUARIO, NOMBRE_USU, CONTRASENA, ROL)
VALUES (SEQ_USUARIO_ID.NEXTVAL, 'protectora_happy', 'protpass1', 'PROTECTORA'); -- ID_USUARIO será 2

INSERT INTO USUARIO (ID_USUARIO, NOMBRE_USU, CONTRASENA, ROL)
VALUES (SEQ_USUARIO_ID.NEXTVAL, 'cliente_carlos', 'securepass2', 'CLIENTE'); -- ID_USUARIO será 3

INSERT INTO USUARIO (ID_USUARIO, NOMBRE_USU, CONTRASENA, ROL)
VALUES (SEQ_USUARIO_ID.NEXTVAL, 'admin_general', 'adminpass', 'PROTECTORA'); -- Ejemplo de otro rol si lo tuvieras, o ajusta a 'Protectora'


-- 2. CLIENTES
-- Asumimos que el ID_USUARIO 1 corresponde a 'cliente_ana'
INSERT INTO CLIENTE (ID_CLIENTE, NIF, NOMBRE, APELLIDOS, FECHA_NACIMIENTO, PROVINCIA, CIUDAD, CALLE, CP, TELEFONO, EMAIL, ID_USUARIO, RUTA_FOTO_PERFIL)
VALUES (SEQ_CLIENTE_ID.NEXTVAL, '12345678A', 'Ana', 'García López', TO_DATE('1990-07-15', 'YYYY-MM-DD'), 'Madrid', 'Madrid', 'Calle Sol 8', '28013', '600112233', 'ana.garcia@email.com', 1, 'fotos/ana_perfil.jpg'); -- ID_CLIENTE será 1

-- Asumimos que el ID_USUARIO 3 corresponde a 'cliente_carlos'
INSERT INTO CLIENTE (ID_CLIENTE, NIF, NOMBRE, APELLIDOS, FECHA_NACIMIENTO, PROVINCIA, CIUDAD, CALLE, CP, TELEFONO, EMAIL, ID_USUARIO, RUTA_FOTO_PERFIL)
VALUES (SEQ_CLIENTE_ID.NEXTVAL, '87654321B', 'Carlos', 'Martínez Ruiz', TO_DATE('1985-03-22', 'YYYY-MM-DD'), 'Barcelona', 'Barcelona', 'Avenida Diagonal 100', '08018', '600998877', 'carlos.martinez@email.com', 3, NULL); -- ID_CLIENTE será 2


-- 3. PROTECTORAS
-- Asumimos que el ID_USUARIO 2 corresponde a 'protectora_happy'
INSERT INTO PROTECTORA (ID_PROTECTORA, CIF, NOMBRE, TELEFONO, EMAIL, PROVINCIA, CIUDAD, CALLE, CP, ID_USUARIO)
VALUES (SEQ_PROTECTORA_ID.NEXTVAL, 'A12345670', 'Happy Paws Shelter', '911223344', 'info@happypaws.org', 'Madrid', 'Getafe', 'Calle de la Alegría 5', '28905', 2); -- ID_PROTECTORA será 1

-- Asumimos que el ID_USUARIO 4 (admin_general) también es una 'Protectora'
INSERT INTO PROTECTORA (ID_PROTECTORA, CIF, NOMBRE, TELEFONO, EMAIL, PROVINCIA, CIUDAD, CALLE, CP, ID_USUARIO)
VALUES (SEQ_PROTECTORA_ID.NEXTVAL, 'B09876543', 'Refugio Animalia', '933445566', 'contacto@animalia.es', 'Valencia', 'Valencia', 'Camino de la Esperanza 12', '46020', 4); -- ID_PROTECTORA será 2


-- 4. RAZAS
INSERT INTO RAZA (ID_RAZA, NOMBRE_RAZA) VALUES (SEQ_RAZA_ID.NEXTVAL, 'Labrador Retriever'); -- ID_RAZA será 1
INSERT INTO RAZA (ID_RAZA, NOMBRE_RAZA) VALUES (SEQ_RAZA_ID.NEXTVAL, 'Bulldog Francés'); -- ID_RAZA será 2
INSERT INTO RAZA (ID_RAZA, NOMBRE_RAZA) VALUES (SEQ_RAZA_ID.NEXTVAL, 'Mestizo Mediano'); -- ID_RAZA será 3


-- 5. PERROS
-- Perros de la protectora Happy Paws Shelter (ID_PROTECTORA = 1)
INSERT INTO PERROS (ID_PERRO, NOMBRE, SEXO, FECHA_NACIMIENTO, ADOPTADO, FOTO, ID_PROTECTORA, ID_RAZA, DESCRIPCION_PERRO)
VALUES (SEQ_PERRO_ID.NEXTVAL, 'Max', 'Macho', TO_DATE('2022-01-15', 'YYYY-MM-DD'), 'N', '/assets/Imagenes/perros/max_labrador.jpg', 1, 1, 'Juguetón y muy cariñoso, ideal para familias.'); -- ID_PERRO será 1

INSERT INTO PERROS (ID_PERRO, NOMBRE, SEXO, FECHA_NACIMIENTO, ADOPTADO, FOTO, ID_PROTECTORA, ID_RAZA, DESCRIPCION_PERRO)
VALUES (SEQ_PERRO_ID.NEXTVAL, 'Bella', 'Hembra', TO_DATE('2021-11-01', 'YYYY-MM-DD'), 'N', '/assets/Imagenes/perros/bella_bulldog.jpg', 1, 2, 'Tranquila y leal, le encantan los mimos.'); -- ID_PERRO será 2

-- Perro de la protectora Refugio Animalia (ID_PROTECTORA = 2)
INSERT INTO PERROS (ID_PERRO, NOMBRE, SEXO, FECHA_NACIMIENTO, ADOPTADO, FOTO, ID_PROTECTORA, ID_RAZA, DESCRIPCION_PERRO)
VALUES (SEQ_PERRO_ID.NEXTVAL, 'Cooper', 'Macho', TO_DATE('2023-03-01', 'YYYY-MM-DD'), 'S', '/assets/Imagenes/perros/cooper_mestizo.jpg', 2, 3, 'Un poco tímido al principio, pero muy dulce. Ya adoptado.'); -- ID_PERRO será 3


-- 6. PATOLOGIAS
INSERT INTO PATOLOGIA (ID_PATOLOGIA, NOMBRE, DESCRIPCION_PATOLOGIA)
VALUES (SEQ_PATOLOGIA_ID.NEXTVAL, 'Alergia al Polvo', 'Sensibilidad a los ácaros del polvo.'); -- ID_PATOLOGIA será 1
INSERT INTO PATOLOGIA (ID_PATOLOGIA, NOMBRE, DESCRIPCION_PATOLOGIA)
VALUES (SEQ_PATOLOGIA_ID.NEXTVAL, 'Otitis Crónica', 'Inflamación recurrente del oído.'); -- ID_PATOLOGIA será 2


-- 7. IDENTIFICACION_PATOLOGIAS
-- Max (ID_PERRO = 1) tiene Alergia al Polvo (ID_PATOLOGIA = 1)
INSERT INTO IDENTIFICACION_PATOLOGIAS (ID_PERRO, ID_PATOLOGIA, NOTAS_ESPECIFICAS)
VALUES (1, 1, 'Necesita limpieza frecuente de su cama y entorno.');


-- 8. RESERVAS_CITAS
-- Ana (ID_CLIENTE = 1) reserva cita con Max (ID_PERRO = 1) de la protectora Happy Paws (ID_PROTECTORA = 1)
INSERT INTO RESERVAS_CITAS (ID_RESERVA_CITA, FECHA, HORA, DONACION, ID_CLIENTE, ID_PERRO, ID_PROTECTORA, ESTADO_CITA)
VALUES (SEQ_RESERVA_CITA_ID.NEXTVAL, TO_DATE('2024-08-20', 'YYYY-MM-DD'), '11:00:00', 5.00, 1, 1, 1, 'Pendiente');


-- 9. PETICIONES_ADOPCION
-- Carlos (ID_CLIENTE = 2) solicita adoptar a Bella (ID_PERRO = 2)
INSERT INTO PETICIONES_ADOPCION (ID_PETICION, FECHA, ESTADO, ID_CLIENTE, ID_PERRO, MENSAJE_PETICION)
VALUES (SEQ_PETICION_ID.NEXTVAL, SYSDATE, 'Pendiente', 2, 2, 'Bella parece la compañera perfecta para mi hogar.');


-- 10. NOTIFICACION (Ejemplo, podría ser creada por triggers)
INSERT INTO NOTIFICACION (ID_NOTIFICACION, FECHA_GENERACION, MENSAJE, TIPO_NOTIFICACION, ID_ENTIDAD_RELACIONADA, ENTIDAD_TIPO)
VALUES (SEQ_NOTIFICACION_ID.NEXTVAL, SYSTIMESTAMP, 'Nueva reserva de cita para Max', 'NUEVA_CITA', 1, 'RESERVAS_CITAS'); -- Asume ID_RESERVA_CITA = 1


-- 11. NOTIFICACIONES_RECIBIDAS
-- La notificación anterior (ID_NOTIFICACION = 1) es para el usuario de la protectora Happy Paws (ID_USUARIO = 2)
INSERT INTO NOTIFICACIONES_RECIBIDAS (ID_USUARIO, ID_NOTIFICACION, LEIDA, FECHA_LEIDA)
VALUES (2, 1, 'N', NULL);


-- 12. REDES_SOCIALES
-- Para Happy Paws Shelter (ID_PROTECTORA = 1)
INSERT INTO REDES_SOCIALES (ID_RED_SOCIAL, PLATAFORMA, URL, ID_PROTECTORA)
VALUES (SEQ_RED_SOCIAL_ID.NEXTVAL, 'Instagram', 'https://instagram.com/happypaws', 1);
INSERT INTO REDES_SOCIALES (ID_RED_SOCIAL, PLATAFORMA, URL, ID_PROTECTORA)
VALUES (SEQ_RED_SOCIAL_ID.NEXTVAL, 'Facebook', 'https://facebook.com/happypaws', 1);